<% if scope.lookupvar('::operatingsystem') == 'windows' -%>
; This Source Code Form is subject to the terms of the Mozilla Public
; License, v. 2.0. If a copy of the MPL was not distributed with this
; file, You can obtain one at http://mozilla.org/MPL/2.0/.
<% else -%>
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.
<% end -%>

[diff]
git=True
showfunc=True
ignoreblanklines=True

[ui]
username = Mozilla Release Engineering <release@mozilla.com>
traceback = True

<% if scope.lookupvar('::operatingsystem') == 'windows' -%>
[worker]
backgroundclose=false
<% end -%>

[extensions]
share=
rebase=
mq=
purge=
<% if scope.lookupvar('::operatingsystem') != 'windows' -%>
robustcheckout=<%=scope.lookupvar('mercurial::settings::hgext_dir')%>/robustcheckout.py
<% end -%>
; Enable sparse checkout only in macOS worker
<% if scope.lookupvar('::operatingsystem') == 'Darwin' -%>
sparse=
<% end %>

[hostsecurity]
hg.mozilla.org:fingerprints = sha256:FF:E7:8D:93:E9:56:3C:C0:19:FC:00:4C:18:B9:86:E5:08:E5:10:F5:E2:EA:48:E8:22:D3:A3:3A:CA:99:C3:4C, sha256:17:38:aa:92:0b:84:3e:aa:8e:52:52:e9:4c:2f:98:a9:0e:bf:6c:3e:e9:15:ff:0a:29:80:f7:06:02:5b:e8:48

[web]
<% if scope.lookupvar('::operatingsystem') != 'windows' -%>
cacerts = /builds/mercurial-certs/cacert.pem
<% else -%>
cacerts=C:\mozilla-build\hg\cacert.pem
<% end -%>
